{
	"name": "Demo",
	"image": "mcr.microsoft.com/devcontainers/dotnet:dev-10.0-preview-noble",
	"forwardPorts": [
		3000,
		5137
	],
	"portsAttributes": {
		"3000": {
			"label": "API",
			"onAutoForward": "notify",
			"visibility": "public"
		},
		"5137": {
			"label": "Frontend",
			"onAutoForward": "notify"
		}
	},
	"customizations": {
		"vscode": {
			"extensions": [
				"ms-azuretools.azure-dev",
        		"microsoft-aspire.aspire-vscode",
				"ms-azuretools.vscode-docker",
				"GitHub.copilot",
				"ms-vscode.extension-test-runner",
				"vitest.explorer",
				"ms-vscode.vscode-speech",
				"Blodwynn.featurehighlight",
				"ms-dotnettools.csharp",
				"ms-dotnettools.csdevkit"
			],
			"settings": {
				"editor.inlineSuggest.experimentalInlineEditsEnabled": true,
				"github.copilot.chat.advanced.inlineEdits.enabled": true,
				"github.copilot.chat.agent.enabled": true,
				"github.copilot.chat.codesearch.enabled": true,
				"github.copilot.chat.generateTests.codeLens": true,
				"chat.agent.enabled": true,
				"chat.promptFiles": true,
				"git.enableSmartCommit": true,
				"github.copilot.chat.search.semanticTextResults": true,
				"github.copilot.chat.edits.temporalContext.enabled": true,
				"github.copilot.chat.completionContext.typescript.mode": "on",
				"github.copilot.chat.languageContext.typescript.enabled": true,
				"github.copilot.nextEditSuggestions.enabled": true,
				"github.copilot.chat.editor.temporalContext.enabled": true
			}
		}
	},
	"postCreateCommand": "npm install -g concurrently && npm run build",
	// set the API port to public visibility
	"postAttachCommand": "gh cs ports visibility 3000:public -c \"$CODESPACE_NAME\"",
	"hostRequirements": {
		"cpus": 4,
		"memory": "8gb"
	},
	"remoteEnv": {
		// When the project is built the Aspire.Cli project produces an executable which can be useful to
		// have on the path for local testing within the devcontainer environment.
		"PATH": "${containerEnv:PATH}:/workspaces/aspire/artifacts/bin/Aspire.Cli/Debug/net8.0/"
	},
	"features": {
		"ghcr.io/devcontainers/features/azure-cli:1": {},
		"ghcr.io/azure/azure-dev/azd:0": {},
		"ghcr.io/devcontainers/features/docker-in-docker": {},
		"ghcr.io/dotnet/aspire-devcontainer-feature/dotnetaspire:1": {},
		"ghcr.io/devcontainers/features/github-cli:1": {},

		"ghcr.io/devcontainers/features/node:1": {},
		"ghcr.io/devcontainers/features/python:1": {},
		"ghcr.io/devcontainers/features/dotnet": {
			"additionalVersions": [
				"8.0.403",
				"9.0"
			]
		}
	}
}
